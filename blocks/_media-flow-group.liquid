{%- assign block_size = block.blocks.size -%}
<div class="flow-box-media__group flow-box-media__group--count-{{ block_size }}">
  {% for nested_block in block.blocks %}
    {% comment %} <div class="flow-box-media__group-item"> {% endcomment %}
    {% render nested_block %}
    {% comment %} </div> {% endcomment %}
  {% endfor %}
</div>

{% schema %}
{
  "name": "Media Flow Group",
  "tag": null,
  "blocks": [
    {
      "type": "_media-flow-item"
    }
  ],
  "settings": [
    {
      "type": "select",
      "id": "item_type",
      "label": "Item Type",
      "options": [
        {
          "value": "image",
          "label": "Image"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image",
      "visible_if": "{{ block.settings.item_type == 'image' }}"
    },
    {
      "type": "url",
      "id": "link",
      "label": "Link (Optional)",
      "visible_if": "{{ block.settings.item_type == 'image' }}"
    },
    {
      "type": "video",
      "id": "video",
      "label": "Shopify Hosted Video",
      "visible_if": "{{ block.settings.item_type == 'video' }}"
    },
    {
      "type": "text",
      "id": "video_url",
      "label": "Video URL (YouTube/Vimeo)",
      "info": "Use if not using Shopify video",
      "visible_if": "{{ block.settings.item_type == 'video' }}"
    },
    {
      "type": "image_picker",
      "id": "cover_image",
      "label": "Cover Image (for external videos)",
      "visible_if": "{{ block.settings.item_type == 'video' }}"
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Autoplay",
      "default": false,
      "visible_if": "{{ block.settings.item_type == 'video' }}"
    },
    {
      "type": "checkbox",
      "id": "loop",
      "label": "Loop",
      "default": true,
      "visible_if": "{{ block.settings.item_type == 'video' }}"
    },
    {
      "type": "checkbox",
      "id": "muted",
      "label": "Muted",
      "default": true,
      "visible_if": "{{ block.settings.item_type == 'video' }}"
    },
    {
      "type": "checkbox",
      "id": "controls",
      "label": "Show Controls",
      "default": true,
      "visible_if": "{{ block.settings.item_type == 'video' }}"
    }
  ],
  "presets": [
    {
      "name": "Media Flow Group"
    }
  ]
}
{% endschema %}
