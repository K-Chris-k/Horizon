<!doctype html>
<html
  class="no-js{% if request.design_mode %} shopify-design-mode{% endif %}"
  lang="{{ request.locale.iso_code }}"
>
  <head>
        <!-- Google tag (gtag.js) for Google Ads -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17164794132"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'AW-17164794132');
        </script>

        <!-- Google Tag Manager -->
        <script>
        (function(w,d,s,l,i){
          w[l]=w[l]||[];
          w[l].push({'gtm.start': new Date().getTime(), event:'gtm.js'});
          var f=d.getElementsByTagName(s)[0],
              j=d.createElement(s),
              dl=l!='dataLayer'?'&l='+l:'';
          j.async=true;
          j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
          f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-MWSFJRN9');
        </script>

        <!-- Event snippet for Page view conversion page -->
      <script>
        gtag('event', 'conversion', {'send_to': 'AW-17164794132/Jh8nCKyQj5AbEJTy5_g_'});
      </script>

   
   
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QODMN042V3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-QODMN042V3');
    </script>

    <!-- Event snippet for Add to cart conversion page
        In your html page, add the snippet and call gtag_report_conversion when someone clicks on the chosen link or button. -->
        <script>
        function gtag_report_conversion(url) {
          var callback = function () {
            if (typeof(url) != 'undefined') {
              window.location = url;
            }
          };
          gtag('event', 'conversion', {
              'send_to': 'AW-17164794132/WzBKCKjK6-YaEJTy5_g_',
              'value': 1.0,
              'currency': 'GBP',
              'event_callback': callback
          });
          return false;
        }
        </script>



    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17164794132"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'AW-17164794132');
    </script>


    <!-- Event snippet for Purchase conversion page -->
    <script>
      gtag('event', 'conversion', {
          'send_to': 'AW-17164794132/uAMUCJvH6NYaEJTy5_g_',
          'transaction_id': ''
      });
    </script>

    <!-- Event snippet for Purchase conversion page -->
    <script>
      gtag('event', 'conversion', {
          'send_to': 'AW-17164794132/uAMUCJvH6NYaEJTy5_g_',
          'value': 1.0,
          'currency': 'GBP',
          'transaction_id': ''
      });
    </script>
      <!-- Event snippet for Add to cart conversion page -->
      <script>
        gtag('event', 'conversion', {
            'send_to': 'AW-17164794132/WzBKCKjK6-YaEJTy5_g_',
            'value': 1.0,
            'currency': 'GBP'
        });
      </script>

      <!-- Google tag (gtag.js) event -->
      <script>
        gtag('event', 'ads_conversion_Checkout_1', {
          // <event_parameters>
        });
      </script>

      <!-- Google tag (gtag.js) event -->
      <script>
        gtag('event', 'add_to_cart', {
          // <event_parameters>
        });
      </script>
      <!-- Event snippet for Begin checkout conversion page -->
      <script>
        gtag('event', 'conversion', {
            'send_to': 'AW-17164794132/yK-nCKmQj5AbEJTy5_g_',
            'value': 1.0,
            'currency': 'GBP'
        });
      </script>

      <!-- Event snippet for 购买 conversion page -->
      <script>
        gtag('event', 'conversion', {
            'send_to': 'AW-17164794132/IYbVCKr2k7kbEJTy5_g_',
            'value': 1.0,
            'currency': 'GBP',
            'transaction_id': ''
        });
      </script>
<script>

document.addEventListener('click', function(e) {
  // 匹配所有“加入购物车”按钮（Shopify 标准 class）
  const addToCartButton = e.target.closest('[data-add-to-cart], .add-to-cart, button[name="add"]');
  if (!addToCartButton) return;

  const productCard = addToCartButton.closest('[data-product-card]') || 
                       addToCartButton.closest('.product-item') || 
                       addToCartButton.closest('.grid-product');

  if (!productCard) return;


  const variantId = addToCartButton.dataset.productVariantId || 
                    addToCartButton.closest('form').querySelector('[name="id"]')?.value;

  const priceElement = productCard.querySelector('[data-product-price] .money, .price-item');
  const price = priceElement ? parseFloat(priceElement.textContent.replace(/[^0-9.]/g, '')) : 0;

  const titleElement = productCard.querySelector('[data-product-title] h3, .product-title, h2');
  const title = titleElement ? titleElement.textContent.trim() : 'Unknown Product';

  gtag('event', 'add_to_cart', {
    currency: '{{ shop.currency }}',
    value: price,
    items: [{
      item_id: variantId || 'unknown',
      item_name: title,
      price: price,
      quantity: 1
    }]
  });

  
  gtag('event', 'conversion', {
    'send_to': 'AW-17164794132/WzBKCKjK6-YaEJTy5_g_',
    'value': price,
    'currency': '{{ shop.currency }}'
  });

  console.log('GA4 add_to_cart fired:', { title, price, variantId });
});
</script>

    {%- if settings.favicon != blank -%}
      <link
        rel="icon"
        type="image/png"
        href="{{ settings.favicon | image_url: width: 32, height: 32 }}"
      >
    {%- endif -%}

    {% comment %} Force scroll to top before any other scripts run {% endcomment %}
    <script>
      // Immediately scroll to top on page load, before any view transitions
      if (window.scrollY !== 0) {
        window.scrollTo(0, 0);
      }
      // Ensure manual scroll restoration
      if ('scrollRestoration' in history) {
        history.scrollRestoration = 'manual';
      }
    </script>

    {% comment %} This a way to wait for main content to load when navigating to a new page so that the view transitions can work consistently {% endcomment %}
    <link
      rel="expect"
      href="#MainContent"
      blocking="render"
      id="view-transition-render-blocker"
    >

    {%- render 'meta-tags' -%}
    {%- render 'stylesheets' -%}
    {%- render 'fonts' -%}
    {%- render 'scripts' -%}
    {%- render 'theme-styles-variables' -%}
    {%- render 'color-schemes' -%}

    {% if request.design_mode %}
      {%- render 'theme-editor' -%}
    {% endif %}

    {{ content_for_header }}
    <!-- Hotjar Tracking Code for New website -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:6564428,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>


  </head>

  <body class="page-width-{{ settings.page_width }} card-hover-effect-{{ settings.card_hover_effect }}">
    {% render 'skip-to-content-link', href: '#MainContent', text: 'accessibility.skip_to_text' %}
    <div id="header-group">
      {% sections 'header-group' %}
    </div>

    <script
      src="{{ 'critical.js' | asset_url }}"
      type="module"
      async
      blocking="render"
    ></script>

    <main
      id="MainContent"
      class="content-for-layout"
      role="main"
      data-page-transition-enabled="{{ settings.page_transition_enabled }}"
      data-product-transition="{{ settings.transition_to_main_product }}"
      data-template="{{ template }}"
    >
      {{ content_for_layout }}
    </main>

    {% sections 'footer-group' %}

    {% render 'search-modal' %}

    {% if settings.quick_add or settings.mobile_quick_add %}
      {% render 'quick-add-modal' %}
    {% endif %}
          <script>
        gtag('event', 'conversion', {
            'send_to': 'AW-17164794132/IYbVCKr2k7kbEJTy5_g_',
            'value': 1.0,
            'currency': 'GBP',
            'transaction_id': ''
        });
      </script>
      <!-- Google tag (gtag.js) -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17164794132"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'AW-17164794132');
      </script>
         <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-MWSFJRN9"></script>
       <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'GTM-MWSFJRN9');
      </script>

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MWSFJRN9"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

  </body>
</html>
