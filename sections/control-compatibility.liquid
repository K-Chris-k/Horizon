{% comment %}
  Control & Compatibility Section
  Features a two-column layout with offset positioning for desktop
  and stacked layout for mobile
{% endcomment %}

<style>
  /* Section Spacing */
  #shopify-section-{{ section.id }} .control-compatibility {
    padding-top: {{ section.settings.padding_top | default: 64 }}px;
    padding-bottom: {{ section.settings.padding_bottom | default: 64 }}px;
  }

  @media screen and (max-width: 749px) {
    #shopify-section-{{ section.id }} .control-compatibility {
      padding-top: {{ section.settings.padding_top_mobile | default: 40 }}px;
      padding-bottom: {{ section.settings.padding_bottom_mobile | default: 40 }}px;
    }
  }

  #shopify-section-{{ section.id }} .control-compatibility__header {
    text-align: center;
    margin-bottom: 4rem;
  }

  #shopify-section-{{ section.id }} .control-compatibility__title {
    font-size: {{ section.settings.title_font_size_desktop | default: '56px' }};
    font-weight: 400;
    line-height: {{ section.settings.title_line_height_desktop | default: '1.2' }};
    margin: 0;
    color: var(--color-foreground, #1a1a1a);
    letter-spacing: -0.02em;
  }

  @media screen and (max-width: 749px) {
    #shopify-section-{{ section.id }} .control-compatibility__title {
      font-size: {{ section.settings.title_font_size_mobile | default: '32px' }};
      line-height: {{ section.settings.title_line_height_mobile | default: '1.3' }};
    }
  }

  {% if section.settings.subtitle != blank %}
  #shopify-section-{{ section.id }} .control-compatibility__subtitle {
    font-size: {{ section.settings.subtitle_font_size_desktop | default: '18px' }};
    line-height: {{ section.settings.subtitle_line_height_desktop | default: '1.6' }};
    color: var(--color-foreground-secondary, #666);
    max-width: 700px;
    margin: 1rem auto 0;
  }

  @media screen and (max-width: 749px) {
    #shopify-section-{{ section.id }} .control-compatibility__subtitle {
      font-size: {{ section.settings.subtitle_font_size_mobile | default: '16px' }};
      line-height: {{ section.settings.subtitle_line_height_mobile | default: '1.5' }};
    }
  }
  {% endif %}

  /* Grid Layout for Desktop */
  #shopify-section-{{ section.id }} .control-compatibility__grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
    align-items: start;
  }

  @media screen and (min-width: 750px) {
    #shopify-section-{{ section.id }} .control-compatibility__grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 24px;
    }
  }

  @media screen and (min-width: 990px) {
    #shopify-section-{{ section.id }} .control-compatibility__grid {
      gap: 2rem;
    }
  }

  /* Block Items */
  #shopify-section-{{ section.id }} .control-compatibility__item {
    position: relative;
    width: 100%;
  }

  /* Offset for even-indexed items on desktop */
  @media screen and (min-width: 750px) {
    #shopify-section-{{ section.id }} .control-compatibility__item--offset {
      margin-top: 128px;
    }
  }

  /* Image Container */
  #shopify-section-{{ section.id }} .control-compatibility__image {
    position: relative;
    width: 100%;
    border-radius: 1rem;
    overflow: hidden;
    background-color: #f5f5f5;
    margin-bottom: 1.5rem;
  }

  #shopify-section-{{ section.id }} .control-compatibility__image img {
    width: 100%;
    height: auto;
    display: block;
    object-fit: cover;
  }

  /* Aspect ratio control */
  #shopify-section-{{ section.id }} .control-compatibility__image--ratio {
    aspect-ratio: 4 / 3;
  }

  #shopify-section-{{ section.id }} .control-compatibility__image--ratio img {
    height: 100%;
  }

  @media screen and (min-width: 990px) {
    #shopify-section-{{ section.id }} .control-compatibility__image {
      margin-bottom: 2rem;
    }
  }

  /* Content Block */
  #shopify-section-{{ section.id }} .control-compatibility__content {
    padding: 0 0.5rem;
  }

  #shopify-section-{{ section.id }} .control-compatibility__item-title {
    font-size: {{ section.settings.content_title_font_size_desktop | default: '28px' }};
    font-weight: 600;
    line-height: {{ section.settings.content_title_line_height_desktop | default: '1.3' }};
    margin: 0 0 1rem 0;
    color: var(--color-foreground, #1a1a1a);
  }

  @media screen and (max-width: 749px) {
    #shopify-section-{{ section.id }} .control-compatibility__item-title {
      font-size: {{ section.settings.content_title_font_size_mobile | default: '24px' }};
      line-height: {{ section.settings.content_title_line_height_mobile | default: '1.4' }};
    }
  }

  #shopify-section-{{ section.id }} .control-compatibility__description {
    font-size: {{ section.settings.content_description_font_size_desktop | default: '16px' }};
    line-height: {{ section.settings.content_description_line_height_desktop | default: '1.7' }};
    color: var(--color-foreground-secondary, #4a4a4a);
    margin: 0;
  }

  @media screen and (max-width: 749px) {
    #shopify-section-{{ section.id }} .control-compatibility__description {
      font-size: {{ section.settings.content_description_font_size_mobile | default: '14px' }};
      line-height: {{ section.settings.content_description_line_height_mobile | default: '1.6' }};
    }
  }

  /* Placeholder for empty image */
  #shopify-section-{{ section.id }} .control-compatibility__image-placeholder {
    width: 100%;
    aspect-ratio: 4 / 3;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #f0f0f0;
    color: #999;
    font-size: 0.875rem;
    border-radius: 1rem;
  }

  /* Mobile Optimization */
  @media screen and (max-width: 749px) {
    #shopify-section-{{ section.id }} .control-compatibility {
      padding-left: 1rem;
      padding-right: 1rem;
    }

    #shopify-section-{{ section.id }} .control-compatibility__header {
      margin-bottom: 2.5rem;
    }

    #shopify-section-{{ section.id }} .control-compatibility__grid {
      gap: 2.5rem;
    }

    #shopify-section-{{ section.id }} .control-compatibility__item {
      margin-top: 0 !important;
    }

    #shopify-section-{{ section.id }} .control-compatibility__image {
      margin-bottom: 1rem;
    }

    #shopify-section-{{ section.id }} .control-compatibility__content {
      padding: 0;
    }
  }

  /* Responsive Images */
  @media screen and (min-width: 750px) and (max-width: 989px) {
    #shopify-section-{{ section.id }} .control-compatibility__item--offset {
      margin-top: clamp(64px, 10vw, 128px);
    }
  }
</style>

<div class="control-compatibility">
  {% if section.settings.title != blank or section.settings.subtitle != blank %}
    <div class="control-compatibility__header">
      {% if section.settings.title != blank %}
        <h2 class="control-compatibility__title">
          {{ section.settings.title }}
        </h2>
      {% endif %}
      
      {% if section.settings.subtitle != blank %}
        <p class="control-compatibility__subtitle">
          {{ section.settings.subtitle }}
        </p>
      {% endif %}
    </div>
  {% endif %}

  {% if section.blocks.size > 0 %}
    <div class="control-compatibility__grid {{ section.settings.custom_class }}">
      {% for block in section.blocks %}
        {% assign block_index = forloop.index %}
        {% assign is_even = block_index | modulo: 2 %}
        
        <div 
          class="control-compatibility__item {% if is_even == 0 %}control-compatibility__item--offset{% endif %}"
          {{ block.shopify_attributes }}
        >
          {%- comment -%} Image Block {%- endcomment -%}
          <div class="control-compatibility__image {% if block.settings.use_aspect_ratio %}control-compatibility__image--ratio{% endif %}">
            {% if block.settings.image != blank %}
              {{
                block.settings.image
                | image_url: width: 800
                | image_tag:
                  loading: 'lazy',
                  alt: block.settings.image.alt | default: block.settings.title,
                  widths: '375, 550, 750, 1100, 1500'
              }}
            {% else %}
              <div class="control-compatibility__image-placeholder">
                {{ 'sections.control_compatibility.image_placeholder' | t | default: 'Image placeholder' }}
              </div>
            {% endif %}
          </div>

          {%- comment -%} Content Block {%- endcomment -%}
          <div class="control-compatibility__content">
            {% if block.settings.title != blank %}
              <h3 class="control-compatibility__item-title">
                {{ block.settings.title }}
              </h3>
            {% endif %}

            {% if block.settings.description != blank %}
              <div class="control-compatibility__description">
                {{ block.settings.description }}
              </div>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  {% endif %}
</div>

{% schema %}
{
  "name": "Control & Compatibility",
  "tag": "section",
  "class": "section section-control-compatibility",
  "settings": [
    {
      "type": "header",
      "content": "Section Header"
    },
    {
      "type": "text",
      "id": "custom_class",
      "label": "Custom Class"

    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Control.Compatibility."
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Subtitle",
      "info": "Optional subtitle text below the main title"
    },
    {
      "type": "header",
      "content": "Typography Settings"
    },
    {
      "type": "header",
      "content": "Main Title Typography"
    },
    {
      "type": "text",
      "id": "title_font_size_desktop",
      "label": "Title Font Size (Desktop)",
      "info": "Font size for desktop in pixels (e.g., '56px' or '3.5rem')",
      "default": "56px"
    },
    {
      "type": "text",
      "id": "title_line_height_desktop",
      "label": "Title Line Height (Desktop)",
      "info": "CSS line-height value for desktop (e.g., '1.2' or '1.5')",
      "default": "1.2"
    },
    {
      "type": "text",
      "id": "title_font_size_mobile",
      "label": "Title Font Size (Mobile)",
      "info": "Font size for mobile devices in pixels (e.g., '32px' or '2rem')",
      "default": "32px"
    },
    {
      "type": "text",
      "id": "title_line_height_mobile",
      "label": "Title Line Height (Mobile)",
      "info": "CSS line-height value for mobile devices (e.g., '1.3' or '1.4')",
      "default": "1.3"
    },
    {
      "type": "header",
      "content": "Subtitle Typography"
    },
    {
      "type": "text",
      "id": "subtitle_font_size_desktop",
      "label": "Subtitle Font Size (Desktop)",
      "info": "Font size for desktop subtitle in pixels (e.g., '18px' or '1.125rem')",
      "default": "18px"
    },
    {
      "type": "text",
      "id": "subtitle_line_height_desktop",
      "label": "Subtitle Line Height (Desktop)",
      "info": "CSS line-height value for desktop subtitle (e.g., '1.6' or '1.5')",
      "default": "1.6"
    },
    {
      "type": "text",
      "id": "subtitle_font_size_mobile",
      "label": "Subtitle Font Size (Mobile)",
      "info": "Font size for mobile subtitle in pixels (e.g., '16px' or '1rem')",
      "default": "16px"
    },
    {
      "type": "text",
      "id": "subtitle_line_height_mobile",
      "label": "Subtitle Line Height (Mobile)",
      "info": "CSS line-height value for mobile subtitle (e.g., '1.5' or '1.4')",
      "default": "1.5"
    },
    {
      "type": "header",
      "content": "Content Item Title Typography"
    },
    {
      "type": "text",
      "id": "content_title_font_size_desktop",
      "label": "Content Title Font Size (Desktop)",
      "info": "Font size for desktop content item titles in pixels (e.g., '28px' or '1.75rem')",
      "default": "28px"
    },
    {
      "type": "text",
      "id": "content_title_line_height_desktop",
      "label": "Content Title Line Height (Desktop)",
      "info": "CSS line-height value for desktop content item titles (e.g., '1.3' or '1.4')",
      "default": "1.3"
    },
    {
      "type": "text",
      "id": "content_title_font_size_mobile",
      "label": "Content Title Font Size (Mobile)",
      "info": "Font size for mobile content item titles in pixels (e.g., '24px' or '1.5rem')",
      "default": "24px"
    },
    {
      "type": "text",
      "id": "content_title_line_height_mobile",
      "label": "Content Title Line Height (Mobile)",
      "info": "CSS line-height value for mobile content item titles (e.g., '1.4' or '1.5')",
      "default": "1.4"
    },
    {
      "type": "header",
      "content": "Content Description Typography"
    },
    {
      "type": "text",
      "id": "content_description_font_size_desktop",
      "label": "Content Description Font Size (Desktop)",
      "info": "Font size for desktop content descriptions in pixels (e.g., '16px' or '1rem')",
      "default": "16px"
    },
    {
      "type": "text",
      "id": "content_description_line_height_desktop",
      "label": "Content Description Line Height (Desktop)",
      "info": "CSS line-height value for desktop content descriptions (e.g., '1.7' or '1.6')",
      "default": "1.7"
    },
    {
      "type": "text",
      "id": "content_description_font_size_mobile",
      "label": "Content Description Font Size (Mobile)",
      "info": "Font size for mobile content descriptions in pixels (e.g., '14px' or '0.875rem')",
      "default": "14px"
    },
    {
      "type": "text",
      "id": "content_description_line_height_mobile",
      "label": "Content Description Line Height (Mobile)",
      "info": "CSS line-height value for mobile content descriptions (e.g., '1.6' or '1.5')",
      "default": "1.6"
    },
    {
      "type": "header",
      "content": "Section Spacing - Desktop"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 120,
      "step": 8,
      "unit": "px",
      "label": "Padding Top (Desktop)",
      "default": 64
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 120,
      "step": 8,
      "unit": "px",
      "label": "Padding Bottom (Desktop)",
      "default": 64
    },
    {
      "type": "header",
      "content": "Section Spacing - Mobile"
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "min": 0,
      "max": 120,
      "step": 8,
      "unit": "px",
      "label": "Padding Top (Mobile)",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "min": 0,
      "max": 120,
      "step": 8,
      "unit": "px",
      "label": "Padding Bottom (Mobile)",
      "default": 40
    }
  ],
  "blocks": [
    {
      "type": "compatibility_item",
      "name": "Content Item",
      "settings": [
        {
          "type": "header",
          "content": "Image"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "checkbox",
          "id": "use_aspect_ratio",
          "label": "Use fixed aspect ratio (4:3)",
          "default": true,
          "info": "Maintains consistent image heights across items"
        },
        {
          "type": "header",
          "content": "Content"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Feature title"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "Describe your feature here with detailed information."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Control & Compatibility",
      "blocks": [
        {
          "type": "compatibility_item",
          "settings": {
            "title": "Easily control.",
            "description": "Easily control and set up all functions remotely via a dedicated mobile app."
          }
        },
        {
          "type": "compatibility_item",
          "settings": {
            "title": "High compatibility.",
            "description": "Seamlessly integrates with Google and Amazon smart speakers, enabling voice-controlled temperature adjustments and home automation with other smart devices through the speaker."
          }
        }
      ]
    }
  ]
}
{% endschema %}

