{% comment %}
  Product Features Section
  Displays smart features with image and feature grid
{% endcomment %}

{%- liquid
  assign section_title_font_size_desktop = section.settings.section_title_font_size_desktop | default: 40
  assign section_title_line_height_desktop = section.settings.section_title_line_height_desktop | default: 1.2
  assign section_title_font_size_mobile = section.settings.section_title_font_size_mobile | default: 28
  assign section_title_line_height_mobile = section.settings.section_title_line_height_mobile | default: 1.3
  
  assign feature_title_font_size_desktop = section.settings.feature_title_font_size_desktop | default: 16
  assign feature_title_line_height_desktop = section.settings.feature_title_line_height_desktop | default: 1.3
  assign feature_title_font_size_mobile = section.settings.feature_title_font_size_mobile | default: 14
  assign feature_title_line_height_mobile = section.settings.feature_title_line_height_mobile | default: 1.4
  
  assign feature_desc_font_size_desktop = section.settings.feature_desc_font_size_desktop | default: 14
  assign feature_desc_line_height_desktop = section.settings.feature_desc_line_height_desktop | default: 1.5
  assign feature_desc_font_size_mobile = section.settings.feature_desc_font_size_mobile | default: 13
  assign feature_desc_line_height_mobile = section.settings.feature_desc_line_height_mobile | default: 1.4
  
  assign padding_top_desktop = section.settings.padding_top | default: 48
  assign padding_bottom_desktop = section.settings.padding_bottom | default: 48
  assign padding_top_mobile = section.settings.padding_top_mobile | default: 32
  assign padding_bottom_mobile = section.settings.padding_bottom_mobile | default: 32
  assign bg_color = section.settings.background_color | default: '#ffffff'
-%}

{%- style -%}
  .pft-section-{{ section.id }} {
    padding: {{ padding_top_desktop }}px 0 {{ padding_bottom_desktop }}px 0;
    background-color: {{ bg_color }};
  }
  
  .pft-section-{{ section.id }} .pft-container-{{ section.id }} {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 var(--spacing-6);
  }
  
  .pft-section-{{ section.id }} .pft-main-content-{{ section.id }} {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-12);
    align-items: center;
  }
  
  .pft-section-{{ section.id }} .pft-image-wrapper-{{ section.id }} {
    position: relative;
    top: -28%;
  }
  
  .pft-section-{{ section.id }} .pft-image-desktop-{{ section.id }} {
    display: block;
    width: 100%;
    height: auto;
  }
  
  .pft-section-{{ section.id }} .pft-image-mobile-only-{{ section.id }} {
    display: none;
  }
  
  .pft-section-{{ section.id }} .pft-features-content-{{ section.id }} {
    padding: var(--spacing-6);
  }
  
  .pft-section-{{ section.id }} .pft-section-title-{{ section.id }} {
    font-size: {{ section_title_font_size_desktop }}px;
    font-weight: 600;
    margin-bottom: var(--spacing-8);
    color: #1a1a1a;
    line-height: {{ section_title_line_height_desktop }};
  }
  
  .pft-section-{{ section.id }} .pft-features-grid-{{ section.id }} {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-2);
  }
  
  .pft-section-{{ section.id }} .pft-feature-item-{{ section.id }} {
    padding: var(--spacing-3);
    border-bottom: 1px solid #e5e5e5;
  }
  
  .pft-section-{{ section.id }} .pft-feature-icon-{{ section.id }} {
    width: 40px;
    height: 40px;
    margin-bottom: var(--spacing-3);
    display: flex;
    align-items: center;
    justify-content: flex-start;
  }
  
  .pft-section-{{ section.id }} .pft-feature-icon-{{ section.id }} img {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }
  
  .pft-section-{{ section.id }} .pft-feature-title-{{ section.id }} {
    font-size: {{ feature_title_font_size_desktop }}px;
    font-weight: 600;
    margin-bottom: var(--spacing-2);
    color: #1a1a1a;
    line-height: {{ feature_title_line_height_desktop }};
  }
  
  .pft-section-{{ section.id }} .pft-feature-description-{{ section.id }} {
    font-size: {{ feature_desc_font_size_desktop }}px;
    line-height: {{ feature_desc_line_height_desktop }};
    color: #666;
    margin:0px;
  }
  
  /* Tablet Responsive */
  @media (max-width: 1440px) {
    .pft-section-{{ section.id }} .pft-image-wrapper-{{ section.id }} {
    position: relative;
    top: -30%;
  }
  }
  @media (max-width: 1280px) {
    .pft-section-{{ section.id }} .pft-image-wrapper-{{ section.id }} {
    position: relative;
    top: -32%;
  }
    
  .pft-section-{{ section.id }} .pft-main-content-{{ section.id }} {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-6);
    align-items: center;
  }
  }
  @media (max-width: 1024px) {
    .pft-section-{{ section.id }} {
      padding: var(--spacing-10) 0;
    }
    
    .pft-section-{{ section.id }} .pft-main-content-{{ section.id }} {
      gap: var(--spacing-8);
    }
    
    .pft-section-{{ section.id }} .pft-features-grid-{{ section.id }} {
      gap: var(--spacing-5);
    }
    .pft-section-{{ section.id }} .pft-image-wrapper-{{ section.id }} {
    position: relative;
    top: -30%;
  }
  }
  
  /* Mobile Responsive */
  @media (max-width: 768px) {
    .pft-section-{{ section.id }} {
      padding: {{ padding_top_mobile }}px 0 {{ padding_bottom_mobile }}px 0;
    }
    
    .pft-section-{{ section.id }} .pft-container-{{ section.id }} {
      padding: 0 var(--spacing-4);
    }
    
    .pft-section-{{ section.id }} .pft-main-content-{{ section.id }} {
      grid-template-columns: 1fr;
      gap: var(--spacing-6);
    }
    
    .pft-section-{{ section.id }} .pft-image-desktop-{{ section.id }} {
      display: none;
    }
    
    .pft-section-{{ section.id }} .pft-image-mobile-only-{{ section.id }} {
      display: block;
      width: 100%;
      height: auto;
      order: 1;
      margin-bottom: var(--spacing-4);
    }
    
    .pft-section-{{ section.id }} .pft-features-content-{{ section.id }} {
      order: 2;
      padding: 0;
    }
    
    .pft-section-{{ section.id }} .pft-section-title-{{ section.id }} {
      font-size: {{ section_title_font_size_mobile }}px;
      line-height: {{ section_title_line_height_mobile }};
      text-align: center;
      margin-bottom: var(--spacing-6);
    }
    
    .pft-section-{{ section.id }} .pft-features-grid-{{ section.id }} {
      grid-template-columns: 1fr 1fr;
      gap: var(--spacing-4);
    }
    
    .pft-section-{{ section.id }} .pft-feature-item-{{ section.id }} {
      padding: var(--spacing-3);
    }
    
    .pft-section-{{ section.id }} .pft-feature-icon-{{ section.id }} {
      width: 32px;
      height: 32px;
      margin-bottom: var(--spacing-2);
    }
    
    .pft-section-{{ section.id }} .pft-feature-title-{{ section.id }} {
      font-size: {{ feature_title_font_size_mobile }}px;
      line-height: {{ feature_title_line_height_mobile }};
      margin-bottom: var(--spacing-1);
    }
    
    .pft-section-{{ section.id }} .pft-feature-description-{{ section.id }} {
      font-size: {{ feature_desc_font_size_mobile }}px;
      line-height: {{ feature_desc_line_height_mobile }};
    }
  }
  
  /* Small Mobile Responsive */
  @media (max-width: 480px) {
    .pft-section-{{ section.id }} {
      padding: {{ padding_top_mobile }}px 0 {{ padding_bottom_mobile }}px 0;
    }
    
    .pft-section-{{ section.id }} .pft-container-{{ section.id }} {
      padding: 0 var(--spacing-4);
    }
    
    .pft-section-{{ section.id }} .pft-features-grid-{{ section.id }} {
      grid-template-columns: 1fr,1fr;
      gap: var(--spacing-4);
    }
    
    .pft-section-{{ section.id }} .pft-feature-item-{{ section.id }} {
      padding: var(--spacing-4) 0;
    }
    
    .pft-section-{{ section.id }} .pft-feature-icon-{{ section.id }} {
      width: 36px;
      height: 36px;
    }
  }
  
  /* Fallback for CSS variables */
  :root {
    --spacing-1: 0.25rem;
    --spacing-2: 0.5rem;
    --spacing-3: 0.75rem;
    --spacing-4: 1rem;
    --spacing-5: 1.25rem;
    --spacing-6: 1.5rem;
    --spacing-8: 2rem;
    --spacing-10: 2.5rem;
    --spacing-12: 3rem;
  }
{%- endstyle -%}

<div class="pft-section-{{ section.id }} {{ section.settings.custom_class }}">
  <div class="pft-container-{{ section.id }}">
    
    {%- comment -%} Main Content Grid {%- endcomment -%}
    <div class="pft-main-content-{{ section.id }}">
      
      {%- comment -%} Left Side: Image {%- endcomment -%}
      <div class="pft-image-wrapper-{{ section.id }}">
        {%- if section.settings.desktop_image != blank -%}
          <img 
            src="{{ section.settings.desktop_image | image_url: width: 800 }}"
            srcset="{{ section.settings.desktop_image | image_url: width: 400 }} 400w,
                    {{ section.settings.desktop_image | image_url: width: 600 }} 600w,
                    {{ section.settings.desktop_image | image_url: width: 800 }} 800w"
            alt="{{ section.settings.desktop_image.alt | default: section.settings.section_title }}"
            class="pft-image-desktop-{{ section.id }}"
            loading="lazy"
            width="{{ section.settings.desktop_image.width }}"
            height="{{ section.settings.desktop_image.height }}"
          >
        {%- endif -%}
      </div>
      
      <div class="pft-features-content-{{ section.id }}">
        
        {%- if section.settings.mobile_image != blank -%}
          <img 
            src="{{ section.settings.mobile_image | image_url: width: 600 }}"
            srcset="{{ section.settings.mobile_image | image_url: width: 300 }} 300w,
                    {{ section.settings.mobile_image | image_url: width: 600 }} 600w"
            alt="{{ section.settings.mobile_image.alt | default: section.settings.section_title }}"
            class="pft-image-mobile-only-{{ section.id }}"
            loading="lazy"
            width="{{ section.settings.mobile_image.width }}"
            height="{{ section.settings.mobile_image.height }}"
          >
        {%- endif -%}
        
        {%- if section.settings.section_title != blank -%}
          <h2 class="pft-section-title-{{ section.id }}">{{ section.settings.section_title }}</h2>
        {%- endif -%}
        
        {%- if section.blocks.size > 0 -%}
          <div class="pft-features-grid-{{ section.id }}">
            {%- for block in section.blocks -%}
              {%- if block.type == 'feature_item' -%}
                <div class="pft-feature-item-{{ section.id }}" {{ block.shopify_attributes }}>
                  {%- if block.settings.feature_icon != blank -%}
                    <div class="pft-feature-icon-{{ section.id }}">
                      <img 
                        src="{{ block.settings.feature_icon | image_url: width: 80 }}"
                        srcset="{{ block.settings.feature_icon | image_url: width: 40 }} 1x,
                                {{ block.settings.feature_icon | image_url: width: 80 }} 2x"
                        alt="{{ block.settings.feature_title | default: 'Feature icon' }}"
                        loading="lazy"
                        width="40"
                        height="40"
                      >
                    </div>
                  {%- endif -%}
                  
                  {%- if block.settings.feature_title != blank -%}
                    <h3 class="pft-feature-title-{{ section.id }}">{{ block.settings.feature_title }}</h3>
                  {%- endif -%}
                  
                  {%- if block.settings.feature_description != blank -%}
                    <p class="pft-feature-description-{{ section.id }}">{{ block.settings.feature_description }}</p>
                  {%- endif -%}
                </div>
              {%- endif -%}
            {%- endfor -%}
          </div>
        {%- endif -%}
        
      </div>
    </div>
    
  </div>
</div>

{% schema %}
{
  "name": "Smart product Features",
  "tag": "section",
  "class": "section-smart-product-features",
  "settings": [
    {
      "type": "header",
      "content": "Main Section Settings"
    },
    {
      "type": "text",
      "id": "custom_class",
      "label": "Custom Class"

    },
    {
      "type": "text",
      "id": "section_title",
      "label": "Section Title",
      "default": "Smart Features"
    },
    {
      "type": "image_picker",
      "id": "desktop_image",
      "label": "Desktop Image"
    },
    {
      "type": "image_picker",
      "id": "mobile_image",
      "label": "Mobile Image (Different from desktop)"
    },
    {
      "type": "header",
      "content": "Section Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding Top (Desktop)",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "default": 48
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding Bottom (Desktop)",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "default": 48
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "label": "Padding Top (Mobile)",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 32
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "label": "Padding Bottom (Mobile)",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 32
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Section Title Typography - Desktop"
    },
    {
      "type": "range",
      "id": "section_title_font_size_desktop",
      "label": "Font Size (Desktop)",
      "min": 20,
      "max": 80,
      "step": 1,
      "unit": "px",
      "default": 40
    },
    {
      "type": "range",
      "id": "section_title_line_height_desktop",
      "label": "Line Height (Desktop)",
      "min": 1,
      "max": 2,
      "step": 0.1,
      "default": 1.2
    },
    {
      "type": "header",
      "content": "Section Title Typography - Mobile"
    },
    {
      "type": "range",
      "id": "section_title_font_size_mobile",
      "label": "Font Size (Mobile)",
      "min": 16,
      "max": 60,
      "step": 1,
      "unit": "px",
      "default": 28
    },
    {
      "type": "range",
      "id": "section_title_line_height_mobile",
      "label": "Line Height (Mobile)",
      "min": 1,
      "max": 2,
      "step": 0.1,
      "default": 1.3
    },
    {
      "type": "header",
      "content": "Feature Title Typography - Desktop"
    },
    {
      "type": "range",
      "id": "feature_title_font_size_desktop",
      "label": "Font Size (Desktop)",
      "min": 12,
      "max": 32,
      "step": 1,
      "unit": "px",
      "default": 16
    },
    {
      "type": "range",
      "id": "feature_title_line_height_desktop",
      "label": "Line Height (Desktop)",
      "min": 1,
      "max": 2,
      "step": 0.1,
      "default": 1.3
    },
    {
      "type": "header",
      "content": "Feature Title Typography - Mobile"
    },
    {
      "type": "range",
      "id": "feature_title_font_size_mobile",
      "label": "Font Size (Mobile)",
      "min": 10,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 14
    },
    {
      "type": "range",
      "id": "feature_title_line_height_mobile",
      "label": "Line Height (Mobile)",
      "min": 1,
      "max": 2,
      "step": 0.1,
      "default": 1.4
    },
    {
      "type": "header",
      "content": "Feature Description Typography - Desktop"
    },
    {
      "type": "range",
      "id": "feature_desc_font_size_desktop",
      "label": "Font Size (Desktop)",
      "min": 10,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 14
    },
    {
      "type": "range",
      "id": "feature_desc_line_height_desktop",
      "label": "Line Height (Desktop)",
      "min": 1,
      "max": 2,
      "step": 0.1,
      "default": 1.5
    },
    {
      "type": "header",
      "content": "Feature Description Typography - Mobile"
    },
    {
      "type": "range",
      "id": "feature_desc_font_size_mobile",
      "label": "Font Size (Mobile)",
      "min": 10,
      "max": 20,
      "step": 1,
      "unit": "px",
      "default": 13
    },
    {
      "type": "range",
      "id": "feature_desc_line_height_mobile",
      "label": "Line Height (Mobile)",
      "min": 1,
      "max": 2,
      "step": 0.1,
      "default": 1.4
    }
  ],
  "blocks": [
    {
      "type": "feature_item",
      "name": "Feature Item",
      "settings": [
        {
          "type": "image_picker",
          "id": "feature_icon",
          "label": "Feature Icon Image",
          "info": "Upload an icon image (recommended size: 80x80px)"
        },
        {
          "type": "text",
          "id": "feature_title",
          "label": "Feature Title",
          "default": "Feature Title"
        },
        {
          "type": "textarea",
          "id": "feature_description",
          "label": "Feature Description",
          "default": "Feature description goes here."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Smart Product Features",
      "blocks": [
        {
          "type": "feature_item",
          "settings": {
            "feature_title": "Programmable",
            "feature_description": "It automatically adjust the room temperature and hot water according to your preset schedule, how busy it always benefits from you."
          }
        },
        {
          "type": "feature_item",
          "settings": {
            "feature_title": "ECO Mode",
            "feature_description": "Save you energy when you're temporarily away from home. And allow you to quickly return your previous setting."
          }
        },
        {
          "type": "feature_item",
          "settings": {
            "feature_title": "Frost Protection",
            "feature_description": "Say goodbye to rising property insurance costs, protect your water pipes from freezing while you're away."
          }
        },
        {
          "type": "feature_item",
          "settings": {
            "feature_title": "Window detection",
            "feature_description": "It automatically shut off or continue heating based on your needs when you ventilate by opening windows."
          }
        }
      ]
    }
  ]
}
{% endschema %}

